### 정규화(Normalization): 개념, 내용 및 예시

---

## **정규화(Normalization)란?**

### **1. 정규화의 개념**
- 정규화는 **데이터베이스 설계 과정에서 데이터 중복을 최소화하고, 데이터 무결성을 보장하기 위해 테이블을 구조화하는 과정**입니다.
- 데이터를 논리적으로 분리하여 데이터의 일관성과 효율성을 높이는 것을 목표로 합니다.

### **2. 정규화의 목적**
1. **데이터 중복 제거**:
   - 동일한 데이터가 여러 테이블에 중복 저장되지 않도록 설계.
2. **데이터 무결성 보장**:
   - 데이터 변경 시 일관성을 유지.
3. **데이터베이스 크기 최적화**:
   - 불필요한 데이터 저장을 줄여 저장 공간 절약.
4. **데이터 갱신 이상(Update Anomaly) 방지**:
   - 중복 데이터로 인해 발생하는 갱신, 삽입, 삭제 시의 문제를 방지.

---

## **정규화 과정**

정규화는 여러 단계로 이루어져 있으며, 각 단계는 특정한 규칙을 만족하도록 테이블을 변환합니다.

### **1. 제1정규형 (1NF: First Normal Form)**
#### 조건:
- 테이블의 모든 열이 원자값(Atomic Value)을 가져야 합니다.
  - 원자값: 더 이상 분해할 수 없는 값.
- 각 열은 단일 값을 가져야 하며, 중첩된 집합이나 배열 형태를 허용하지 않습니다.

#### 예시 (비정규형 → 1NF):
**비정규형 테이블 (중첩된 값)**:
| 학생ID | 이름   | 과목         |
|--------|--------|--------------|
| 1      | Alice  | Math, Science|
| 2      | Bob    | History      |

**1NF로 변환**:
| 학생ID | 이름   | 과목    |
|--------|--------|---------|
| 1      | Alice  | Math    |
| 1      | Alice  | Science |
| 2      | Bob    | History |

---

### **2. 제2정규형 (2NF: Second Normal Form)**
#### 조건:
- 제1정규형(1NF)을 만족해야 합니다.
- 기본 키(Primary Key)에 대해 부분 함수 종속이 없어야 합니다.
  - 부분 함수 종속: 기본 키의 일부에만 의존하는 속성.

#### 예시 (1NF → 2NF):
**1NF 테이블**:
| 학생ID | 과목    | 교수명     |
|--------|---------|------------|
| 1      | Math    | Dr. Smith  |
| 1      | Science | Dr. Brown  |
| 2      | History | Dr. White  |

- 기본 키: `(학생ID, 과목)`
- 문제점: `교수명`은 `과목`에만 의존하고 `학생ID`와는 관계가 없음(부분 함수 종속).

**2NF로 변환**:
- 테이블을 분리하여 부분 함수 종속 제거.

**학생 테이블**:
| 학생ID | 이름   |
|--------|--------|
| 1      | Alice  |
| 2      | Bob    |

**과목 테이블**:
| 과목    | 교수명     |
|---------|------------|
| Math    | Dr. Smith  |
| Science | Dr. Brown  |
| History | Dr. White  |

**학생-과목 관계 테이블**:
| 학생ID | 과목    |
|--------|---------|
| 1      | Math    |
| 1      | Science |
| 2      | History |

---

### **3. 제3정규형 (3NF: Third Normal Form)**
#### 조건:
- 제2정규형(2NF)을 만족해야 합니다.
- 이행적 함수 종속(Transitive Dependency)이 없어야 합니다.
  - 이행적 함수 종속: A → B, B → C 관계가 있을 때 A → C가 되는 경우.

#### 예시 (2NF → 3NF):
**2NF 테이블**:
| 학생ID | 학과ID   | 학과명       |
|--------|----------|--------------|
| 1      | CS       | Computer Science |
| 2      | ENG      | English          |

- 문제점: `학과명`은 `학과ID`에만 의존하며, `학생ID`와는 직접적인 관계가 없음(이행적 종속).

**3NF로 변환**:
- 이행적 종속을 제거하기 위해 테이블 분리.

**학생 테이블**:
| 학생ID | 학과ID   |
|--------|----------|
| 1      | CS       |
| 2      | ENG      |

**학과 테이블**:
| 학과ID   | 학과명       |
|----------|--------------|
| CS       | Computer Science |
| ENG      | English          |

---

## **고급 정규화 단계**

### **4. BCNF (Boyce-Codd Normal Form)**
#### 조건:
- 제3정규형(3NF)을 만족해야 하며, 모든 결정자가 후보 키(Candidate Key)여야 함.
- 후보 키가 아닌 속성이 결정자로 작용할 경우 BCNF 위반.

#### 예시:
- 복잡한 관계에서 발생하며, 주로 고급 설계 시 고려됩니다.

---

## **정규화의 장단점**

### **장점**
1. **데이터 무결성 보장**:
   - 데이터 중복 제거 및 일관성 유지.
2. **저장 공간 절약**:
   - 불필요한 데이터 중복을 제거하여 저장 공간 최적화.
3. **갱신 이상 방지**:
   - 갱신, 삽입, 삭제 시 발생할 수 있는 이상 현상 방지.

### **단점**
1. **복잡성 증가**:
   - 정규화를 진행할수록 테이블 수가 증가하여 쿼리가 복잡해질 수 있음.
2. **성능 저하 가능성**:
   - 조인(Join)이 많아져 조회 성능이 저하될 수 있음.

---

## 요약

### 정규화 단계 요약

| 단계     | 조건                                                                                 | 목적                                   |
|----------|--------------------------------------------------------------------------------------|---------------------------------------|
| 제1정규형(1NF) | 모든 열이 원자값을 가져야 함                                                        | 중첩된 데이터 제거                    |
| 제2정규형(2NF) | 기본 키에 대해 부분 함수 종속 제거                                                  | 부분 종속 제거                        |
| 제3정규형(3NF) | 이행적 함수 종속 제거                                                             | 이행적 종속 제거                      |
| BCNF       | 모든 결정자가 후보 키여야 함                                                         | 고급 무결성 보장                      |

정규화는 데이터베이스 설계에서 중요한 과정으로, 데이터 무결성과 효율성을 높이는 데 필수적입니다. 그러나 성능 요구사항에 따라 적절한 수준에서 비정규화를 적용하는 것도 고려해야 합니다.
