### JSON, 세션 기반 인증, 토큰 기반 인증, 그리고 JWT 인증 방식 정리

---

## **JSON (JavaScript Object Notation)**

### **JSON의 개념**
- JSON은 데이터를 저장하고 전송하기 위한 **경량 데이터 교환 형식**입니다.
- 사람이 읽기 쉬운 텍스트 기반 형식으로, 프로그래밍 언어 간 데이터 교환이 용이합니다.
- 주로 **API 응답**이나 **데이터 직렬화**에 사용됩니다.

### **JSON의 구조**
1. **객체(Object)**: 중괄호 `{}`로 감싸고, 키-값 쌍으로 구성.
2. **배열(Array)**: 대괄호 `[]`로 감싸고, 값들의 목록으로 구성.

#### JSON 예시
```json
{
    "user": {
        "id": 1,
        "name": "Alice",
        "email": "alice@example.com"
    },
    "roles": ["admin", "editor"],
    "isActive": true
}
```

---

## **세션 기반 인증**

### **세션 방식의 개념**
- 세션 기반 인증은 서버에서 클라이언트의 상태를 유지하는 방식입니다.
- 사용자가 로그인하면 서버는 고유한 세션 ID를 생성하여 클라이언트에 전달합니다.
- 클라이언트는 요청마다 세션 ID를 전송하여 서버가 사용자를 식별할 수 있도록 합니다.

### **세션 기반 인증의 동작 원리 (Flow)**

1. **로그인 요청**:
   - 클라이언트가 사용자 ID와 비밀번호를 서버로 전송.
2. **세션 생성**:
   - 서버는 사용자 인증 후 고유한 세션 ID를 생성하고 이를 클라이언트에 반환(쿠키에 저장).
3. **요청마다 세션 ID 전송**:
   - 클라이언트는 요청 시 세션 ID를 포함하여 서버에 전송.
4. **서버에서 세션 확인**:
   - 서버는 저장된 세션 데이터를 참조하여 사용자를 식별 및 처리.

#### 예시
```plaintext
1. 클라이언트 → 서버: 로그인 요청 (ID, PW)
2. 서버 → 클라이언트: "Set-Cookie: session_id=xyz123"
3. 이후 요청 시:
   - 클라이언트 → 서버: "Cookie: session_id=xyz123"
   - 서버는 session_id로 사용자 상태 확인.
```

### **특징**
- **장점**:
  - 민감한 데이터가 서버에 저장되므로 보안성이 높음.
  - 상태 정보를 중앙에서 관리 가능.
- **단점**:
  - 서버 메모리를 사용하므로 대규모 트래픽 처리 시 부하 증가.
  - 분산 환경에서는 세션 동기화가 필요.

---

## **토큰 기반 인증**

### **토큰 방식의 개념**
- 토큰 기반 인증은 클라이언트가 로그인 후 발급받은 토큰을 통해 인증을 수행하는 방식입니다.
- 토큰은 자체적으로 사용자 정보를 포함하며, 서버는 상태를 저장하지 않습니다(무상태).

### **토큰 기반 인증의 동작 원리 (Flow)**

1. **로그인 요청**:
   - 클라이언트가 사용자 ID와 비밀번호를 서버로 전송.
2. **토큰 발급**:
   - 서버는 사용자 인증 후 Access Token을 생성하여 클라이언트에 반환.
3. **요청마다 토큰 전송**:
   - 클라이언트는 요청 시 Authorization 헤더에 토큰을 포함하여 전송.
4. **서버에서 토큰 검증**:
   - 서버는 토큰의 유효성을 검증하고 요청을 처리.

#### 예시
```plaintext
1. 클라이언트 → 서버: 로그인 요청 (ID, PW)
2. 서버 → 클라이언트: Access Token 발급 ("Authorization: Bearer abc123")
3. 이후 요청 시:
   - 클라이언트 → 서버: "Authorization: Bearer abc123"
   - 서버는 토큰 검증 후 응답 처리.
```

### **특징**
- **장점**:
  - 무상태성으로 인해 확장성과 분산 환경에서 유리.
  - 민감한 데이터가 클라이언트에만 저장되므로 보안 강화 가능.
- **단점**:
  - 토큰 탈취 시 악용 가능(만료 시간 설정 필요).
  - 토큰 크기가 커질 경우 네트워크 오버헤드 발생.

---

## **JWT (JSON Web Token)**

### **JWT의 개념**
- JWT는 JSON 형식으로 데이터를 인코딩한 토큰으로, 주로 인증 및 정보 교환에 사용됩니다.
- 서명(Signature)을 포함하여 데이터 무결성을 보장하며, 기본적으로 Base64 URL-safe 형식으로 인코딩됩니다.

### **JWT의 구조**
JWT는 `.`으로 구분된 세 가지 파트로 구성됩니다:
1. **Header**:
   - 토큰 유형과 서명 알고리즘 정보 포함.
   ```json
   {
       "alg": "HS256",
       "typ": "JWT"
   }
   ```

2. **Payload**:
   - 사용자 정보(클레임)와 기타 데이터 포함.
   ```json
   {
       "sub": "1234567890",
       "name": "Alice",
       "iat": 1516239022,
       "exp": 1516242622
   }
   ```

3. **Signature**:
   - Header와 Payload를 조합한 뒤 비밀 키로 서명하여 생성.

#### JWT 예시
```plaintext
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkFsaWNlIiwiaWF0IjoxNTE2MjM5MDIyfQ
.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

---

### **JWT를 이용한 인증 원리**

1. 사용자가 로그인하면 서버는 사용자 정보를 기반으로 JWT를 생성하여 반환합니다.
2. 클라이언트는 JWT를 로컬 스토리지 또는 쿠키에 저장합니다.
3. 이후 요청마다 JWT를 Authorization 헤더에 포함하여 전송합니다.
4. 서버는 JWT 서명을 검증하고 Payload 정보를 참조하여 요청을 처리합니다.

---

### **JWT 기반 인증의 동작 원리 (Flow)**

| 단계 | 설명 |
|------|------|
| 1️⃣ 로그인 | 사용자가 ID와 비밀번호로 로그인 요청 → 서버에서 사용자 인증 후 JWT 발급 |
| 2️⃣ JWT 전달 | 클라이언트가 JWT를 저장(예: 로컬 스토리지) |
| 3️⃣ API 호출 | 요청마다 Authorization 헤더에 JWT 포함 (`Authorization: Bearer <JWT>`) |
| 4️⃣ 검증 및 처리 | 서버가 JWT 서명을 검증하고 Payload 정보를 확인 후 요청 처리 |

---

## **JWT의 특징**

### 장점
1. 무상태성:
   - 상태 정보를 클라이언트가 관리하므로 확장성과 성능이 우수함.
2. 자체 검증 가능:
   - 서명을 통해 데이터 무결성을 보장하며, 별도의 데이터베이스 조회 없이도 검증 가능.
3. 유연성:
   - 다양한 데이터(JSON)를 포함할 수 있어 확장성이 뛰어남.

### 단점
1. 크기 문제:
   - Base64 인코딩으로 인해 일반 텍스트보다 크기가 커짐(네트워크 오버헤드 발생).
2. 만료 관리 필요:
   - 만료된 토큰을 갱신하거나 블랙리스트 관리 필요.
3. 보안 위험:
   - 민감한 정보를 Payload에 포함하지 않아야 함(누구나 디코딩 가능).

---

## **JWT 사용 시 유의사항**

1. 민감한 정보(Payload):
   - Payload는 누구나 디코딩 가능하므로 비밀번호 등 민감한 데이터를 포함하지 말아야 함.
   
2. HTTPS 사용 필수:
   - 네트워크 상에서 토큰 탈취를 방지하기 위해 HTTPS 연결을 사용해야 함.

3. 만료 시간 설정(`exp`):
   - 짧은 만료 시간을 설정하고 Refresh Token을 활용해 보안을 강화해야 함.

4. 서명 알고리즘 선택:
   - 강력한 알고리즘(HMAC SHA256 또는 RSA)을 선택해 위변조 방지.

---

## 요약

| 항목                | 세션 기반 인증                          | 토큰 기반 인증 (JWT)                   |
|---------------------|-----------------------------------------|----------------------------------------|
| 상태 관리           | 서버에서 상태 유지                     | 무상태, 클라이언트에서 상태 유지        |
| 확장성              | 분산 환경에서 비효율적                 | 확장성과 분산 환경에 적합              |
| 보안                | 민감 정보는 안전하게 관리됨             | 민감 정보 제외 필요                    |
| 주요 단점           | 동기화 필요, 메모리 부하               | 탈취 시 위험, 만료 관리 필요            |

JWT는 현대 웹 애플리케이션에서 널리 사용되는 인증 방식으로, 특히 SPA(Single Page Application) 및 모바일 앱과 같은 무상태 환경에서 유용합니다. 개발자는 이를 활용해 확장성과 보안을 모두 고려한 효율적인 인증 시스템을 구축할 수 있습니다.
