### 웹과 웹 브라우저의 구조 및 동작 방식

---

## **웹 브라우저의 구조**

웹 브라우저는 사용자가 웹 페이지를 탐색하고 상호작용할 수 있도록 돕는 소프트웨어입니다. 브라우저는 다양한 구성 요소로 이루어져 있으며, 각 구성 요소가 협력하여 HTML, CSS, JavaScript 파일을 처리하고 화면에 표시합니다.

### **1. 주요 구성 요소**
1. **사용자 인터페이스(User Interface)**:
   - 사용자가 직접 상호작용하는 부분으로, 주소창, 뒤로/앞으로 버튼, 북마크, 탭 등이 포함됩니다.
   - 웹 페이지 자체를 제외한 모든 UI 요소를 포함합니다.

2. **브라우저 엔진(Browser Engine)**:
   - 사용자 인터페이스와 렌더링 엔진 간의 중재 역할을 수행합니다.
   - 사용자 입력(예: URL 요청)을 받아 렌더링 엔진에 전달하고 결과를 UI에 반환합니다.

3. **렌더링 엔진(Rendering Engine)**:
   - HTML, CSS를 파싱하여 DOM(Document Object Model)과 CSSOM(CSS Object Model)을 생성하고 이를 결합해 렌더 트리를 구축합니다.
   - 렌더 트리를 기반으로 레이아웃 계산 및 화면에 픽셀을 그리는 작업을 수행합니다.
   - 주요 렌더링 엔진:
     - Blink: Chrome, Edge
     - WebKit: Safari
     - Gecko: Firefox

4. **네트워킹(Networking)**:
   - HTTP/HTTPS 요청을 처리하고 서버로부터 리소스를 가져옵니다.
   - 캐싱 및 쿠키 관리도 수행합니다.

5. **JavaScript 엔진(JavaScript Engine)**:
   - JavaScript 코드를 파싱하고 실행하여 동적 콘텐츠를 처리합니다.
   - 주요 JavaScript 엔진:
     - V8: Chrome, Edge
     - SpiderMonkey: Firefox
     - JavaScriptCore: Safari

6. **UI 백엔드(UI Backend)**:
   - 체크박스, 입력 필드 등 기본적인 UI 요소를 그리는 데 사용됩니다.
   - 운영 체제의 UI 메서드를 활용하여 플랫폼 독립적으로 동작합니다.

7. **데이터 저장소(Data Persistence)**:
   - 쿠키, 로컬 스토리지, 세션 스토리지 등을 통해 데이터를 로컬에 저장합니다.
   - IndexedDB와 같은 고급 데이터 저장소도 지원합니다.

---

## **웹 브라우저의 동작 방식**

웹 브라우저는 사용자가 입력한 URL을 기반으로 서버에서 데이터를 가져와 화면에 표시하는 과정을 수행합니다. 이 과정은 다음과 같은 단계로 이루어집니다.

### **1. URL 입력 및 DNS 조회**
- 사용자가 URL을 입력하면 브라우저는 DNS(Domain Name System)를 통해 해당 도메인의 IP 주소를 조회합니다.
- 예: `www.example.com` → `93.184.216.34`

### **2. HTTP 요청**
- 브라우저는 IP 주소를 통해 서버와 TCP 연결(3-Way Handshake)을 설정한 뒤 HTTP/HTTPS 요청을 보냅니다.
- 요청 메시지에는 메서드(GET, POST 등), 헤더 정보, URL 등이 포함됩니다.

### **3. 서버 응답**
- 서버는 요청된 리소스(HTML, CSS, JS 등)를 HTTP 응답 메시지로 반환합니다.
- 응답 메시지는 상태 코드(200 OK, 404 Not Found 등), 헤더 정보, 본문 데이터를 포함합니다.

### **4. HTML 파싱 및 DOM 생성**
- 브라우저는 HTML 파일을 파싱하여 DOM(Document Object Model) 트리를 생성합니다.
- DOM은 HTML 문서를 객체화한 계층적 구조입니다.

### **5. CSS 파싱 및 CSSOM 생성**
- HTML 파싱 중 발견된 `<link>` 태그를 통해 외부 CSS 파일을 가져오고 이를 파싱하여 CSSOM(CSS Object Model)을 생성합니다.
- CSSOM은 스타일 정보를 객체화한 구조입니다.

### **6. 렌더 트리 생성**
- DOM과 CSSOM을 결합하여 렌더 트리를 생성합니다.
- 렌더 트리는 화면에 표시할 요소와 스타일 정보를 포함하며, `display: none`과 같은 비시각적 요소는 제외됩니다.

### **7. 레이아웃 계산(Layout)**
- 렌더 트리를 기반으로 각 요소의 크기와 위치를 계산합니다.
- 뷰포트 크기와 스타일 규칙 등을 고려하여 레이아웃이 결정됩니다.

### **8. 페인팅(Painting)**
- 레이아웃 정보와 스타일 정보를 바탕으로 픽셀 단위로 화면에 그립니다.
- 색상, 이미지, 텍스트 등이 적용됩니다.

### **9. 컴포지팅(Compositing)**
- 애니메이션이나 변환이 적용된 요소는 별도의 레이어로 처리되며, 최종적으로 모든 레이어가 합쳐져 화면에 표시됩니다.

---

## **예시: 웹 페이지 로드 과정**

1. 사용자가 브라우저 주소창에 `https://example.com` 입력 후 Enter 키를 누릅니다.
2. 브라우저가 DNS 서버에서 `example.com`의 IP 주소를 조회합니다.
3. IP 주소를 통해 서버에 HTTP GET 요청을 보냅니다.
4. 서버가 HTML 파일과 함께 관련 리소스(CSS, JS 등)의 경로를 응답으로 반환합니다.
5. 브라우저가 HTML 파일을 파싱하며 DOM 트리를 생성하고 필요한 리소스를 추가 요청합니다.
6. CSS 파일을 가져와 CSSOM 트리를 생성하고 DOM과 결합해 렌더 트리를 만듭니다.
7. 렌더 트리를 기반으로 레이아웃 계산 후 화면에 페인팅 작업이 이루어집니다.

---

## 요약

| 구성 요소          | 역할                                                                 |
|-------------------|----------------------------------------------------------------------|
| 사용자 인터페이스  | 주소창, 버튼 등 사용자와 상호작용하는 부분                           |
| 브라우저 엔진      | UI와 렌더링 엔진 간 중재 역할                                        |
| 렌더링 엔진        | HTML/CSS 파싱 → DOM/CSSOM 생성 → 렌더 트리 생성 및 화면 표시         |
| 네트워킹          | HTTP/HTTPS 요청 처리 및 리소스 다운로드                              |
| JavaScript 엔진    | JavaScript 실행 및 DOM 조작                                          |
| 데이터 저장소      | 쿠키, 캐시 등 로컬 데이터 관리                                       |

웹 브라우저는 이러한 구조와 동작 방식을 통해 사용자에게 빠르고 직관적인 웹 경험을 제공합니다.

---
